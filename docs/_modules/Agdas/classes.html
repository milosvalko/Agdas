<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agdas.classes &mdash; Agdas 1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Agdas
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"></div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Agdas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">Agdas.classes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for Agdas.classes</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">sqlite3</span> <span class="k">as</span> <span class="nn">sql</span>
<span class="c1"># from CONFIG import matrDatabase, SAE</span>
<span class="c1"># from warning import Warning</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.mlab</span> <span class="k">as</span> <span class="nn">mlab</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FormatStrFormatter</span><span class="p">,</span> <span class="n">MaxNLocator</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">scipy.interpolate</span> <span class="k">as</span> <span class="nn">interp</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span>


<span class="n">script_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>

<div class="viewcode-block" id="Fall"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall">[docs]</a><span class="k">class</span> <span class="nc">Fall</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for fitting of the drop</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mf">2.99792458e+17</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;z0&#39;</span><span class="p">,</span> <span class="s1">&#39;v0&#39;</span><span class="p">,</span> <span class="s1">&#39;g0&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">,</span> <span class="s1">&#39;a2&#39;</span><span class="p">,</span> <span class="s1">&#39;a3&#39;</span><span class="p">,</span> <span class="s1">&#39;a4&#39;</span><span class="p">,</span> <span class="s1">&#39;a5&#39;</span><span class="p">,</span> <span class="s1">&#39;a6&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kdis</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kimp</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ksae</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Fall.set_ksol_k"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.set_ksol_k">[docs]</a>    <span class="k">def</span> <span class="nf">set_ksol_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ksol_k</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ksol_k</span> <span class="o">=</span> <span class="n">ksol_k</span></div>

<div class="viewcode-block" id="Fall.set_ksol"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.set_ksol">[docs]</a>    <span class="k">def</span> <span class="nf">set_ksol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ksol</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ksol</span> <span class="o">=</span> <span class="n">ksol</span></div>

<div class="viewcode-block" id="Fall.setFringe"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setFringe">[docs]</a>    <span class="k">def</span> <span class="nf">setFringe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set measured fringes</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        times : list</span>
<span class="sd">            list of fringes, fringes are representation by string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fringe</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float_</span><span class="p">((</span><span class="n">times</span><span class="p">))</span></div>

<div class="viewcode-block" id="Fall.setLambda"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setLambda">[docs]</a>    <span class="k">def</span> <span class="nf">setLambda</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set wave length</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        Lambda : str</span>
<span class="sd">            Wave length of laser</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Lambda</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Lambda</span><span class="p">)</span></div>

<div class="viewcode-block" id="Fall.setScaleFactor"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setScaleFactor">[docs]</a>    <span class="k">def</span> <span class="nf">setScaleFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scaleFactor</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set GuideCard Scale Factor from Project file</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        scaleFactor : str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaleFactor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scaleFactor</span><span class="p">)</span></div>

<div class="viewcode-block" id="Fall.setMultiplex"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setMultiplex">[docs]</a>    <span class="k">def</span> <span class="nf">setMultiplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">multiplex</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set GuideCard Multiplex from Project file</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        multiplex : str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiplex</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">multiplex</span><span class="p">)</span></div>

<div class="viewcode-block" id="Fall.setGradient"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setGradient">[docs]</a>    <span class="k">def</span> <span class="nf">setGradient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grad</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set Gradient from Project file</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        grad : str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gradient</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">grad</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e-8</span></div>

<div class="viewcode-block" id="Fall.setModulFreq"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setModulFreq">[docs]</a>    <span class="k">def</span> <span class="nf">setModulFreq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmod</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set Modulation frequency from GUI - fmodf</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fmod : float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmod</span> <span class="o">=</span> <span class="n">fmod</span></div>

<div class="viewcode-block" id="Fall.setLpar"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setLpar">[docs]</a>    <span class="k">def</span> <span class="nf">setLpar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Lpar</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set Parasitic wave length from GUI - lpar</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        Lpar : float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Lpar</span> <span class="o">=</span> <span class="n">Lpar</span></div>

<div class="viewcode-block" id="Fall.setRubiFreq"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setRubiFreq">[docs]</a>    <span class="k">def</span> <span class="nf">setRubiFreq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set Rubidium Frequency from Project file - Instrument data</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        freq : str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubiFreq</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span></div>

<div class="viewcode-block" id="Fall.setFrRange"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setFrRange">[docs]</a>    <span class="k">def</span> <span class="nf">setFrRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frmin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">frmax</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set first and last fringe</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frmin : int</span>
<span class="sd">            index of first fringe</span>
<span class="sd">        frmax : int</span>
<span class="sd">            index of last fringe</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frmin</span> <span class="o">=</span> <span class="n">frmin</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frmax</span> <span class="o">=</span> <span class="n">frmax</span></div>

<div class="viewcode-block" id="Fall.setKpar"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setKpar">[docs]</a>    <span class="k">def</span> <span class="nf">setKpar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kpar</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The method set if parasitic wavelength correction should be included</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        kpar : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span> <span class="o">=</span> <span class="n">kpar</span></div>

<div class="viewcode-block" id="Fall.checkKDIS"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.checkKDIS">[docs]</a>    <span class="k">def</span> <span class="nf">checkKDIS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable cable dispersion correction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kdis</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Fall.checkKIMP"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.checkKIMP">[docs]</a>    <span class="k">def</span> <span class="nf">checkKIMP</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable impedance mismatch correction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kimp</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Fall.checkKSAE"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.checkKSAE">[docs]</a>    <span class="k">def</span> <span class="nf">checkKSAE</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable self-attraction correction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ksae</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Fall.setLcable"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setLcable">[docs]</a>    <span class="k">def</span> <span class="nf">setLcable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Lcable</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set length of L cabel - GUI - lcable_ar</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        Lcable : float</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Lcable</span> <span class="o">=</span> <span class="n">Lcable</span></div>

<div class="viewcode-block" id="Fall.setAcable"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setAcable">[docs]</a>    <span class="k">def</span> <span class="nf">setAcable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Acable</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set A cable from GONFIG</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        Acable : float</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Acable</span> <span class="o">=</span> <span class="n">Acable</span></div>

<div class="viewcode-block" id="Fall.setPcable"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.setPcable">[docs]</a>    <span class="k">def</span> <span class="nf">setPcable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Pcable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set P cable from GONFIG</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        Pcable : float</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pcable</span> <span class="o">=</span> <span class="n">Pcable</span></div>

<div class="viewcode-block" id="Fall.computeLST"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.computeLST">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">computeLST</span><span class="p">(</span><span class="n">A</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">frmin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">frmax</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        A : np.ndarray</span>
<span class="sd">            matrix of derivations</span>
<span class="sd">        z : np.ndarray</span>
<span class="sd">            vector of measuring</span>
<span class="sd">        frmin : int</span>
<span class="sd">            first fringe</span>
<span class="sd">        frmax : int</span>
<span class="sd">            last fringe</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        x : tuple</span>
<span class="sd">            return value from numpy.linalg.lstsq()</span>
<span class="sd">        covar : np.ndarray</span>
<span class="sd">            covariance matrix</span>
<span class="sd">        m02 : float</span>
<span class="sd">            m02=res*res&#39;/(frmax-frmin-k)</span>
<span class="sd">        std : float</span>
<span class="sd">            standard deviation of fit</span>
<span class="sd">        stdX : standard deviation of fitted unknow values</span>
<span class="sd">        res : np.ndarray</span>
<span class="sd">            residuals for fringes, res=z-A*X</span>
<span class="sd">        m0 : float</span>
<span class="sd">            m0 computed from fringes in [frmin, frmax] range</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">lstsq</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">rcond</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># solution of LST</span>
        <span class="n">covar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span><span class="o">.</span><span class="n">I</span>  <span class="c1"># covariance matrix</span>
        <span class="n">m02</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">frmax</span> <span class="o">-</span> <span class="n">frmin</span> <span class="o">-</span> <span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># m02=res*res&#39;/(frmax-frmin-k)</span>
        <span class="n">stdX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">covar</span><span class="p">),</span> <span class="n">m02</span><span class="p">))</span>  <span class="c1"># standart devivations of x</span>
        <span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">stdX</span><span class="p">,</span> <span class="n">stdX</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c1"># res=z-A*X</span>
        <span class="n">m0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">frmin</span><span class="p">:</span><span class="n">frmax</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="n">frmin</span><span class="p">:</span><span class="n">frmax</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">frmax</span> <span class="o">-</span> <span class="n">frmin</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">covar</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">covar</span><span class="p">,</span> <span class="n">m02</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">stdX</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">m0</span></div>

<div class="viewcode-block" id="Fall.LST"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.LST">[docs]</a>    <span class="k">def</span> <span class="nf">LST</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># &quot;&quot;&quot;</span>
        <span class="c1"># Compute &#39;z0&#39;,&#39;v0&#39;,&#39;g0&#39;,&#39;a1&#39;,&#39;a2&#39;,&#39;a3&#39;,&#39;a4&#39;,&#39;a5&#39;,&#39;a6&#39; by least squares method.</span>
        <span class="c1"># For computing LST with non-zero gradient call method - LST(grad=True)</span>
        <span class="c1"># For computing LST with zero gradient call method - LST(grad=False)</span>
        <span class="c1"># &quot;&quot;&quot;</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method compute all of fits by least square method and set all of important variable as variable of class Fall</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># count of fringe use for computing</span>
        <span class="n">nfringe</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fringe</span><span class="p">)</span>

        <span class="c1"># interpolated SAE for measuring</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ksae</span><span class="p">:</span>
            <span class="n">asae</span> <span class="o">=</span> <span class="n">interp</span><span class="o">.</span><span class="n">pchip</span><span class="p">([</span><span class="n">SAE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1e9</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">SAE</span><span class="p">),</span> <span class="mi">2</span><span class="p">)],</span>
                                <span class="p">[</span><span class="n">SAE</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">SAE</span><span class="p">),</span> <span class="mi">2</span><span class="p">)])</span>

        <span class="c1"># initialization of z, tt, A</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nfringe</span><span class="p">)</span>  <span class="c1"># vector of z coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nfringe</span><span class="p">)</span>  <span class="c1"># vector of fringe time</span>

        <span class="n">A1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nfringe</span><span class="p">,</span> <span class="mi">7</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span><span class="p">))</span>  <span class="c1"># matrix to LST without gradient</span>
        <span class="n">A_grad1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nfringe</span><span class="p">,</span> <span class="mi">7</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span><span class="p">))</span>  <span class="c1"># matrix to LST with gradient</span>
        <span class="n">A4</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nfringe</span><span class="p">,</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span><span class="p">))</span>  <span class="c1"># matrix to LST with modulation</span>

        <span class="n">dv_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">asae_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">vsae_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zsae_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dz_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># loop for all fringes</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nfringe</span><span class="p">):</span>

            <span class="c1"># vector of z</span>
            <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Lambda</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplex</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaleFactor</span><span class="p">)</span>
            <span class="c1"># correct fringe</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">fringe</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1e7</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rubiFreq</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ksol</span> <span class="o">*</span> <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>

            <span class="c1"># interpolated SAE</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ksae</span><span class="p">:</span>
                <span class="n">asae_interp</span> <span class="o">=</span> <span class="n">asae</span><span class="p">(</span><span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">asae_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asae_interp</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">dv</span> <span class="o">=</span> <span class="n">asae_interp</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">dv</span>

                    <span class="n">dv_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dv</span><span class="p">)</span>
                    <span class="n">vsae_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dv</span><span class="p">)</span>
                    <span class="n">dz</span> <span class="o">=</span> <span class="n">vsae_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">dz_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dz</span><span class="p">)</span>
                    <span class="n">zsae_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dz</span> <span class="o">*</span> <span class="mf">1e-8</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">dv</span> <span class="o">=</span> <span class="p">(</span><span class="n">asae_list</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">asae_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                    <span class="n">vsae_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vsae_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dv</span><span class="p">)</span>
                    <span class="n">dz_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">vsae_list</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">vsae_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]))</span>
                    <span class="n">zsae_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zsae_list</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dz_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="n">zsae_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1"># print(zsae_list[-1])</span>

            <span class="c1"># corrections from dispersion and distortion</span>
            <span class="n">fcefr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mf">9.8093</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Lambda</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="mf">10e8</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kdis</span><span class="p">:</span>
                <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">178.2</span> <span class="o">-</span> <span class="mf">4.47</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">fcefr</span> <span class="o">/</span> <span class="mf">10e5</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.3</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">fcefr</span> <span class="o">/</span> <span class="mf">10e5</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">36</span> <span class="o">*</span> <span class="mf">9.8093</span> <span class="o">*</span> \
                         <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Lcable</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kimp</span><span class="p">:</span>
                <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">9.8093</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mf">10e8</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">fcefr</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Acable</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">fcefr</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Lcable</span> <span class="o">/</span> <span class="mf">0.66</span> <span class="o">/</span> <span class="mi">299792458</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pcable</span><span class="p">))</span>

            <span class="c1"># arguments for sin and cos functions</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmod</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">arg2</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmod</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

            <span class="c1"># derivations</span>
            <span class="n">z_z0</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># with gradient</span>
            <span class="n">z_v0_grad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gradient</span> <span class="o">/</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">**</span> <span class="mi">3</span>
            <span class="n">z_g0_grad</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gradient</span> <span class="o">/</span> <span class="mi">24</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">4</span>

            <span class="c1"># without gradient</span>
            <span class="n">z_v0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">z_g0</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

            <span class="c1"># A matrix elements</span>
            <span class="n">z_a1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">arg2</span><span class="p">)</span>
            <span class="n">z_a2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">arg2</span><span class="p">)</span>
            <span class="n">z_a3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">arg2</span><span class="p">)</span>
            <span class="n">z_a4</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">arg1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">arg2</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span><span class="p">:</span>
                <span class="n">z_a5</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">Lpar</span><span class="p">)</span>
                <span class="n">z_a6</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">Lpar</span><span class="p">)</span>

                <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">z_z0</span><span class="p">,</span> <span class="n">z_v0</span><span class="p">,</span> <span class="n">z_g0</span><span class="p">,</span> <span class="n">z_a3</span><span class="p">,</span> <span class="n">z_a1</span><span class="p">,</span> <span class="n">z_a4</span><span class="p">,</span> <span class="n">z_a2</span><span class="p">,</span> <span class="n">z_a5</span><span class="p">,</span> <span class="n">z_a6</span><span class="p">]</span>

                <span class="n">line_grad</span> <span class="o">=</span> <span class="p">[</span><span class="n">z_z0</span><span class="p">,</span> <span class="n">z_v0_grad</span><span class="p">,</span> <span class="n">z_g0_grad</span><span class="p">,</span> <span class="n">z_a3</span><span class="p">,</span> <span class="n">z_a1</span><span class="p">,</span> <span class="n">z_a4</span><span class="p">,</span> <span class="n">z_a2</span><span class="p">,</span> <span class="n">z_a5</span><span class="p">,</span> <span class="n">z_a6</span><span class="p">]</span>

                <span class="n">A4</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_a5</span>
                <span class="n">A4</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">z_a6</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="n">z_z0</span><span class="p">,</span> <span class="n">z_v0</span><span class="p">,</span> <span class="n">z_g0</span><span class="p">,</span> <span class="n">z_a3</span><span class="p">,</span> <span class="n">z_a1</span><span class="p">,</span> <span class="n">z_a4</span><span class="p">,</span> <span class="n">z_a2</span><span class="p">]</span>
                <span class="n">line_grad</span> <span class="o">=</span> <span class="p">[</span><span class="n">z_z0</span><span class="p">,</span> <span class="n">z_v0_grad</span><span class="p">,</span> <span class="n">z_g0_grad</span><span class="p">,</span> <span class="n">z_a3</span><span class="p">,</span> <span class="n">z_a1</span><span class="p">,</span> <span class="n">z_a4</span><span class="p">,</span> <span class="n">z_a2</span><span class="p">]</span>

            <span class="c1"># line of A matrix</span>
            <span class="c1"># line=[z_z0, z_v0, z_g0, z_a1, z_a2, z_a3, z_a4, z_a5, z_a6]</span>

            <span class="n">A_grad1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">line_grad</span>

            <span class="n">A4</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">A4</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="n">A1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">line</span>

        <span class="c1"># separate</span>
        <span class="n">A_grad</span> <span class="o">=</span> <span class="n">A_grad1</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">A1</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">z1</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">]</span>
        <span class="n">A2</span> <span class="o">=</span> <span class="n">A</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">7</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">kpar</span><span class="p">]</span>

        <span class="c1"># A4=np.zeros([self.frmax-self.frmin+1,5])</span>
        <span class="c1"># A4[:,0:2]=A1[:,0:2]</span>

        <span class="c1"># Fit without gradient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">covar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m02</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdX</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">m0withouGR</span> <span class="o">=</span> <span class="n">Fall</span><span class="o">.</span><span class="n">computeLST</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">frmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">,</span>
                                                                                        <span class="n">frmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">)</span>

        <span class="c1"># Fit with gradient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_grad</span><span class="p">,</span> <span class="n">covar_grad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m02_grad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdstd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_grad</span><span class="p">,</span> <span class="n">res_grad</span><span class="p">,</span> <span class="n">m0withgradient</span> <span class="o">=</span> <span class="n">Fall</span><span class="o">.</span><span class="n">computeLST</span><span class="p">(</span>
            <span class="n">A</span><span class="o">=</span><span class="n">A_grad</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">frmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">,</span> <span class="n">frmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">)</span>

        <span class="c1"># from sandbox1 import max_ind</span>
        <span class="c1"># self.ind_covar = max_ind(covar_grad)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xef</span><span class="p">,</span> <span class="n">xefCovar</span><span class="p">,</span> <span class="n">xefM02</span><span class="p">,</span> <span class="n">xefStd</span><span class="p">,</span> <span class="n">stdXX</span><span class="p">,</span> <span class="n">xefRes</span><span class="p">,</span> <span class="n">m00</span> <span class="o">=</span> <span class="n">Fall</span><span class="o">.</span><span class="n">computeLST</span><span class="p">(</span><span class="n">A2</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">frmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">,</span>
                                                                                 <span class="n">frmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">res_grad1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">z1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">A_grad1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_grad</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c1"># residuals for all fringes</span>

        <span class="n">ress</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">]</span>  <span class="c1"># residuals for correct interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ssres</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">ress</span><span class="p">,</span> <span class="n">ress</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">frmin</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1"># is drop accepted value</span>

        <span class="c1"># LST with modulation</span>
        <span class="n">A4</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">6</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_grad</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gradient</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="mf">1e6</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>
                    <span class="nb">range</span><span class="p">(</span><span class="n">nfringe</span><span class="p">)]</span>
        <span class="n">zgrad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nfringe</span><span class="p">))</span>
        <span class="n">zgrad</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">z1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nfringe</span><span class="p">)]</span>
        <span class="n">modkor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">A_grad1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">:])</span>
        <span class="n">zgrad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">zgrad</span><span class="p">,</span> <span class="n">modkor</span><span class="o">.</span><span class="n">transpose</span><span class="p">())</span>
        <span class="n">AA4</span> <span class="o">=</span> <span class="n">A4</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">zgrad4</span> <span class="o">=</span> <span class="n">zgrad</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">]</span>

        <span class="c1"># Gradient estimation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xgrad4</span><span class="p">,</span> <span class="n">covarXgrad4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m0grad4</span><span class="p">,</span> <span class="n">stdGrad4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stdGradX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Resgrad4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m0gradient</span> <span class="o">=</span> <span class="n">Fall</span><span class="o">.</span><span class="n">computeLST</span><span class="p">(</span>
            <span class="n">A</span><span class="o">=</span><span class="n">AA4</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">zgrad4</span><span class="p">,</span> <span class="n">frmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmin</span><span class="p">,</span> <span class="n">frmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">frmax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resgrad4</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">zgrad</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">A4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xgrad4</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># printDict(dict(zip(self.keys,x_grad[0])))</span>
        <span class="c1"># printDict(dict(zip(self.keys,x[0])))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">g0_Gr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_grad</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="Fall.effectiveHeight"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.effectiveHeight">[docs]</a>    <span class="k">def</span> <span class="nf">effectiveHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Effective height of measuring</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0_Gr</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gradient</span></div>

<div class="viewcode-block" id="Fall.effectiveHeightTop"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.effectiveHeightTop">[docs]</a>    <span class="k">def</span> <span class="nf">effectiveHeightTop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Effective height of measuring at top of the drop</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Grad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">v0</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_Gr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">htop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">Grad</span></div>

<div class="viewcode-block" id="Fall.effectivePosition"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.effectivePosition">[docs]</a>    <span class="k">def</span> <span class="nf">effectivePosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Effective position of free fall</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">effectiveZ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">z0</span></div>

<div class="viewcode-block" id="Fall.gTop"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.gTop">[docs]</a>    <span class="k">def</span> <span class="nf">gTop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        G in effective height</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gTop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_Gr</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gradient</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Grad</span></div>

<div class="viewcode-block" id="Fall.gTopCor"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Fall.gTopCor">[docs]</a>    <span class="k">def</span> <span class="nf">gTopCor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tide</span><span class="p">,</span> <span class="n">load</span><span class="p">,</span> <span class="n">baro</span><span class="p">,</span> <span class="n">polar</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load correction from tide, load, baro and polar to gTop</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gTopCor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gTop</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">tide</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">load</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">baro</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">polar</span></div></div>

<div class="viewcode-block" id="projectFile"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.projectFile">[docs]</a><span class="k">class</span> <span class="nc">projectFile</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read Project file and create dictionary --stationData</span>
<span class="sd">        --instrumentData</span>
<span class="sd">        --processingResults</span>
<span class="sd">        --gravityCorrections</span>
<span class="sd">        --self.names_summary</span>
<span class="sd">        --self.units</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projectfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        projectfile : str</span>
<span class="sd">            path to Project file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectfile</span> <span class="o">=</span> <span class="n">projectfile</span>

<div class="viewcode-block" id="projectFile.read"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.projectFile.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read project file word by word and create &#39;self.file&#39; list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_lines</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_lines</span><span class="p">:</span>
            <span class="n">line_split</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">line_split</span><span class="p">)</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line_split</span><span class="p">))]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="projectFile.insert_to_names"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.projectFile.insert_to_names">[docs]</a>    <span class="k">def</span> <span class="nf">insert_to_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method collects name of lines from project file for summary</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dict : dict</span>
<span class="sd">            dictionary of values</span>
<span class="sd">        i : index of line in raw file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_lines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_lines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]][:</span><span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">name</span></div>

<div class="viewcode-block" id="projectFile.insert_to_units"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.projectFile.insert_to_units">[docs]</a>    <span class="k">def</span> <span class="nf">insert_to_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method collects units of values for summary</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dict : dict</span>
<span class="sd">            dictionary of values</span>
<span class="sd">        i : index of line in raw file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="projectFile.createDictionary"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.projectFile.createDictionary">[docs]</a>    <span class="k">def</span> <span class="nf">createDictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method create dictionaries with data from Raw file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        stationData : dict</span>
<span class="sd">        instrumentData : dict</span>
<span class="sd">        processingResults : dict</span>
<span class="sd">        gravityCorrections : dict</span>
<span class="sd">        self.names_summary : dict</span>
<span class="sd">        self.units : dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">stationData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">instrumentData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">processingResults</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">gravityCorrections</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">)):</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Project&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Name:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;ProjName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Name:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Data&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Code:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;SiteCode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Lat:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Latitude:&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deg&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Long:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Longitude:&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;deg&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Elev:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;elev&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;elev&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Elevation:&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;elev&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Height:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Setup&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;setupHeight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Height:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Transfer&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cm&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;transferHeight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="c1"># self.insert_to_units(stationData, i)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;transferHeight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cm&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Height:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Actual&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;actualHeight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Gradient:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;cm&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;gradient&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Pressure:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Air&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;airPressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Factor:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Admittance&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;barometricFactor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Coord:&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;polarX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;polarX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;X polar coordinate:&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;polarX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span>

                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;polarY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;polarY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Y polar coordinate:&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="s1">&#39;polarY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Filename:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Potential&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;potentialFile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Filename:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Factor&#39;</span><span class="p">:</span>
                <span class="n">stationData</span><span class="p">[</span><span class="s1">&#39;deltaFactorFile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">stationData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Type:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Meter&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;meterType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;S/N:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;meterS/N&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Height:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Factory&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;factoryHeight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Frequency:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Rubidium&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;rubiFreq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Laser:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ID:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;laser&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ID:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;ID_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IE:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;IE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;IE_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IF:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;IF&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;IF_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IG:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;IG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;IG_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IH:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;IH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;IH_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;II:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;II&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;II_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;IJ:&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;IJ&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

                <span class="c1"># instrumentData[&#39;IJ_V&#39;] = self.file[i + 4]</span>
                <span class="c1"># self.insert_to_names(instrumentData, i)</span>
                <span class="c1"># self.insert_to_units(instrumentData, i)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Frequency:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Modulation&#39;</span><span class="p">:</span>
                <span class="n">instrumentData</span><span class="p">[</span><span class="s1">&#39;modulFreq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">instrumentData</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Date:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Time:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DOY:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;doy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Year:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Offset&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;timeOffset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">[</span><span class="s1">&#39;timeOffset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Time Offset (D h:m:s):&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Gravity:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;gravity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Scatter:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;setScatter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Precision:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Uncertainty:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Total&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;totalUncertainty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Collected:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;setsCollected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Processed:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Sets&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;setsProcessed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Processed:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#s&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;processedSets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Processed:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;NOT&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Sets&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;numNotProcessed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Drops/Set:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;dropsInSet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Accepted:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;acceptedDrops&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Rejected:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;rejectedDrops&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Acquired:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;totalFringes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Start:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;fringeStart&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fringes:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;processedFringes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Multiplex:&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;multiplex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Factor:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Scale&#39;</span><span class="p">:</span>
                <span class="n">processingResults</span><span class="p">[</span><span class="s1">&#39;scaleFactor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">processingResults</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;(ETGTAB):&#39;</span><span class="p">:</span>
                <span class="n">gravityCorrections</span><span class="p">[</span><span class="s1">&#39;earthTide&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Motion:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Polar&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Barometric&#39;</span><span class="p">:</span>
                <span class="n">gravityCorrections</span><span class="p">[</span><span class="s1">&#39;polarMotion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Pressure:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Barometric&#39;</span><span class="p">:</span>
                <span class="n">gravityCorrections</span><span class="p">[</span><span class="s1">&#39;baroPress&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Height:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;µGal&#39;</span><span class="p">:</span>
                <span class="n">gravityCorrections</span><span class="p">[</span><span class="s1">&#39;transferHeightGal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Xo:&#39;</span><span class="p">:</span>
                <span class="n">gravityCorrections</span><span class="p">[</span><span class="s1">&#39;referenceXo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_names</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_to_units</span><span class="p">(</span><span class="n">gravityCorrections</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">stationData</span><span class="p">,</span> <span class="n">instrumentData</span><span class="p">,</span> <span class="n">processingResults</span><span class="p">,</span> <span class="n">gravityCorrections</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names_summary</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span></div></div>


<div class="viewcode-block" id="rawFile"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.rawFile">[docs]</a><span class="k">class</span> <span class="nc">rawFile</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read Raw file</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rawfile : str</span>
<span class="sd">            path of rawfile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span> <span class="o">=</span> <span class="n">rawfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<div class="viewcode-block" id="rawFile.read"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.rawFile.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read raw file from direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">raw</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_lines</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="rawFile.rawHeader2"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.rawFile.rawHeader2">[docs]</a>    <span class="k">def</span> <span class="nf">rawHeader2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return second line of header from raw file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        header2 : list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span></div>

<div class="viewcode-block" id="rawFile.rawHeader1"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.rawFile.rawHeader1">[docs]</a>    <span class="k">def</span> <span class="nf">rawHeader1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return first line of header from raw file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        header1 : list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span></div>

<div class="viewcode-block" id="rawFile.rawLines"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.rawFile.rawLines">[docs]</a>    <span class="k">def</span> <span class="nf">rawLines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return lines of raw file</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        lines : list</span>
<span class="sd">            All lines except headers</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span></div></div>


<div class="viewcode-block" id="dropFile"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.dropFile">[docs]</a><span class="k">class</span> <span class="nc">dropFile</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read Drop file</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dropfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dropfile : str</span>
<span class="sd">            path of Drop file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dropfile</span> <span class="o">=</span> <span class="n">dropfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<div class="viewcode-block" id="dropFile.read"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.dropFile.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read drop file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">drop</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drop_lines</span> <span class="o">=</span> <span class="n">drop</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">drop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="dropFile.dropHeader4"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.dropFile.dropHeader4">[docs]</a>    <span class="k">def</span> <span class="nf">dropHeader4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return fourth header from drop file</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        header4 : list</span>
<span class="sd">            4. header</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span></div>

<div class="viewcode-block" id="dropFile.dropLines"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.dropFile.dropLines">[docs]</a>    <span class="k">def</span> <span class="nf">dropLines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return lines of drop file</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        lines : list</span>
<span class="sd">            All lines except headers</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_lines</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span></div></div>


<div class="viewcode-block" id="estim"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.estim">[docs]</a><span class="k">class</span> <span class="nc">estim</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write estim file</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            file path</span>
<span class="sd">        name : str</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;Set </span><span class="si">{0}</span><span class="s1"> Drop </span><span class="si">{0}</span><span class="s1"> m0 </span><span class="si">{0}</span><span class="s1"> z0 </span><span class="si">{0}</span><span class="s1"> z0-std </span><span class="si">{0}</span><span class="s1"> v0 </span><span class="si">{0}</span><span class="s1"> v0-std </span><span class="si">{0}</span><span class="s1"> g0 </span><span class="si">{0}</span><span class="s1"> g0-std </span><span class="si">{0}</span><span class="s1"> a </span><span class="si">{0}</span><span class="s1"> a-std </span><span class="si">{0}</span><span class="s1"> b </span><span class="si">{0}</span><span class="s1"> b-std </span><span class="si">{0}</span><span class="s1"> c </span><span class="si">{0}</span><span class="s1"> c-std </span><span class="si">{0}</span><span class="s1"> d </span><span class="si">{0}</span><span class="s1"> d-std </span><span class="si">{0}</span><span class="s1"> e </span><span class="si">{0}</span><span class="s1"> e-std </span><span class="si">{0}</span><span class="s1"> f </span><span class="si">{0}</span><span class="s1"> f-std &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;   </span><span class="si">{0}</span><span class="s1">    </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{0}</span><span class="s1"> mm </span><span class="si">{0}</span><span class="s1"> mm </span><span class="si">{0}</span><span class="s1"> mm.s-1 </span><span class="si">{0}</span><span class="s1"> mm.s-1 </span><span class="si">{0}</span><span class="s1"> nm.s-2 </span><span class="si">{0}</span><span class="s1"> nm.s-2 </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm </span><span class="si">{0}</span><span class="s1"> nm   &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">&#39;;&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/Files/estim.csv&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/Files/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="s1">&#39;estim.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="ne">Warning</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="s1">&#39;Close &#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_estim.csv&#39;</span> <span class="o">+</span> <span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;critical&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warning&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/Files/&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="s1">&#39;estim.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">units</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># self.f.close()</span>

<div class="viewcode-block" id="estim.printResult"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.estim.printResult">[docs]</a>    <span class="k">def</span> <span class="nf">printResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="nb">set</span><span class="p">,</span> <span class="n">drop</span><span class="p">,</span> <span class="n">m0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print result of drop to estim file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dropResult</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">,</span> <span class="n">drop</span><span class="p">,</span> <span class="n">m0</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)):</span>
            <span class="n">dropResult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">dropResult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">std</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="c1"># dropResult[3] = round(dropResult[3], 4)</span>
        <span class="c1"># dropResult[4] = round(dropResult[4], 14)</span>
        <span class="c1"># dropResult[5] = round(dropResult[5], 4)</span>
        <span class="c1"># dropResult[6] = round(dropResult[6], 15)</span>
        <span class="c1"># dropResult[8] = round(dropResult[8], 3)</span>

        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">dropResult</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="res_final"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.res_final">[docs]</a><span class="k">class</span> <span class="nc">res_final</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for writing outputs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="s1">&#39;/Files/&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            Path of output</span>
<span class="sd">        header : list</span>
<span class="sd">            Headers splitted by delimiter</span>
<span class="sd">        name : str</span>
<span class="sd">            Project name</span>
<span class="sd">        files</span>
<span class="sd">        delimiter</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span> <span class="o">=</span> <span class="n">delimiter</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="n">files</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="ne">Warning</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="s1">&#39;Close &#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span> <span class="o">+</span> <span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;critical&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warning&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="n">files</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># self.f.write(units+&#39;\n&#39;)</span>

<div class="viewcode-block" id="res_final.printResult"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.res_final.printResult">[docs]</a>    <span class="k">def</span> <span class="nf">printResult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write row (as list) of output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        line : list</span>
<span class="sd">            Row of output file</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">delimiter</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>

<div class="viewcode-block" id="res_final.write_line"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.res_final.write_line">[docs]</a>    <span class="k">def</span> <span class="nf">write_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write row (as string) of output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        line : str</span>
<span class="sd">            line of output file formated by delimiter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="res_final.close"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.res_final.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close connection with the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="matr_db"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.matr_db">[docs]</a><span class="k">class</span> <span class="nc">matr_db</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for work with output database</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create connection with matr database.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            path of output database</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span><span class="o">.</span><span class="n">enable_load_extension</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span><span class="o">.</span><span class="n">load_extension</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">script_path</span><span class="p">,</span> <span class="s1">&#39;math.dll&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">matrDatabase</span><span class="p">[</span><span class="s1">&#39;schema&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s1">&#39;DELETE FROM results&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="matr_db.insert"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.matr_db.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute query.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        query : str</span>
<span class="sd">            sql query</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></div>

<div class="viewcode-block" id="matr_db.get"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.matr_db.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return database request.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        query : str</span>
<span class="sd">            query</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        res : list</span>
<span class="sd">            list of tuples with request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="matr_db.commit"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.matr_db.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Commit data to database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>

<div class="viewcode-block" id="matr_db.close"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.matr_db.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close connection with database</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matr_db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Graph"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph">[docs]</a><span class="k">class</span> <span class="nc">Graph</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for graph plotting</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">x_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">y_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">winsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        path : str</span>
<span class="sd">            path of graph</span>
<span class="sd">        name : str</span>
<span class="sd">            name of graph</span>
<span class="sd">        project : str</span>
<span class="sd">            project name</span>
<span class="sd">        x_label : str</span>
<span class="sd">            label of x ax</span>
<span class="sd">        y_label : str</span>
<span class="sd">            label of y ax</span>
<span class="sd">        title : str</span>
<span class="sd">            title of graph</span>
<span class="sd">        show : bool</span>
<span class="sd">            open graph after plot</span>
<span class="sd">        winsize : tuple</span>
<span class="sd">            size of graph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span> <span class="o">=</span> <span class="n">plt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">winsize</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span> <span class="o">=</span> <span class="n">show</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_label</span> <span class="o">=</span> <span class="n">x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_label</span> <span class="o">=</span> <span class="n">y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>

<div class="viewcode-block" id="Graph.decimal"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.decimal">[docs]</a>    <span class="k">def</span> <span class="nf">decimal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimal_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set decimal number for y ax</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        decimal_number : int</span>
<span class="sd">            decimal number</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s1">&#39;%.</span><span class="si">{}</span><span class="s1">f&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_number</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Graph.x_ax_int"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.x_ax_int">[docs]</a>    <span class="k">def</span> <span class="nf">x_ax_int</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set integers at x ax</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="n">integer</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></div>

<div class="viewcode-block" id="Graph.plotXY"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.plotXY">[docs]</a>    <span class="k">def</span> <span class="nf">plotXY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">mark</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">columns_name</span><span class="o">=</span><span class="p">[],</span> <span class="n">legend</span><span class="o">=</span><span class="p">[],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x : list</span>
<span class="sd">            list of lists, x = [x1, ..., x2]</span>
<span class="sd">        y : list</span>
<span class="sd">            list of lists, y = [y1, ..., y2]</span>
<span class="sd">        mark : list</span>
<span class="sd">            list of markers</span>
<span class="sd">        columns_name</span>
<span class="sd">        legend : list</span>
<span class="sd">            list of legends</span>
<span class="sd">        lw : float</span>
<span class="sd">            line width</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Plot XY data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columns_name</span> <span class="o">=</span> <span class="n">columns_name</span>

        <span class="k">if</span> <span class="n">lw</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mark</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mark</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.histogram"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.histogram">[docs]</a>    <span class="k">def</span> <span class="nf">histogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hist_data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">fit</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot histogram from data in list</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        hist_data : list</span>
<span class="sd">            input data</span>
<span class="sd">        fit : bool</span>
<span class="sd">            True - fit by Gaussian curve</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create histogram to plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hist_data</span> <span class="o">=</span> <span class="n">hist_data</span>

        <span class="c1"># Count of histogram columns by Sturges rule</span>
        <span class="c1"># bins=np.floor(1+3.32*np.log(len(hist_data)))</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hist_data</span><span class="p">)))</span>

        <span class="n">_</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">hist_data</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bins</span><span class="p">),</span> <span class="n">density</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

        <span class="c1"># fitting graph by Gaussian curve</span>
        <span class="k">if</span> <span class="n">fit</span><span class="p">:</span>
            <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">hist_data</span><span class="p">)</span>
            <span class="n">variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">hist_data</span><span class="p">)</span>
            <span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hist_data</span><span class="p">)</span> <span class="o">*</span> <span class="n">dx</span>
            <span class="n">best_fit_line</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">best_fit_line</span><span class="o">*</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;-r&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.error_bar"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.error_bar">[docs]</a>    <span class="k">def</span> <span class="nf">error_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_err</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">y_err</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">yerr</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">color_err</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot error bar graph</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x_err : list</span>
<span class="sd">            x coordinates</span>
<span class="sd">        y_err : list</span>
<span class="sd">            y coordinates</span>
<span class="sd">        yerr : list</span>
<span class="sd">            length of error bar</span>
<span class="sd">        color_err : str</span>
<span class="sd">            color of points</span>
<span class="sd">        ms : float</span>
<span class="sd">            marker size</span>
<span class="sd">        capsize : float</span>
<span class="sd">            size of</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create error bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_err</span> <span class="o">=</span> <span class="n">x_err</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_err</span> <span class="o">=</span> <span class="n">y_err</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yerr</span> <span class="o">=</span> <span class="n">yerr</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">x_err</span><span class="p">,</span> <span class="n">y_err</span><span class="p">,</span> <span class="n">yerr</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_err</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="n">ms</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="n">capsize</span><span class="p">,</span>
                         <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.text"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.text">[docs]</a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot text to graph</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x : list</span>
<span class="sd">            list of lists x coordinates, x = [x1, ..., x2]</span>
<span class="sd">        y : list</span>
<span class="sd">            list of lists y coordinates, y = [y1, ..., y2]</span>
<span class="sd">        t : list</span>
<span class="sd">            list of lists texts, t = [t1, ..., t2]</span>
<span class="sd">        c : list</span>
<span class="sd">            list of lists colors, c = [c1, ..., c2]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Text to plot</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div>

<div class="viewcode-block" id="Graph.ylim"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.ylim">[docs]</a>    <span class="k">def</span> <span class="nf">ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lim</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set y limits</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lim : list</span>
<span class="sd">            y limits = [lim1,  lim2]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">lim</span><span class="p">)</span></div>

<div class="viewcode-block" id="Graph.save"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Graph.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save graph to path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Save plot to direction as png</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">:</span>
            <span class="c1"># self.gr.show()</span>
            <span class="n">ret_code</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.png&#39;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gr</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Compare_gsoft_agdas"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Compare_gsoft_agdas">[docs]</a><span class="k">class</span> <span class="nc">Compare_gsoft_agdas</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class compares values of gravity from G software and Agdas.</span>
<span class="sd">    The class generates compare_gsoft_agdas.csv file in Files folder with mean, standard deviation,</span>
<span class="sd">    max difference and differences between Agdas an g software</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vgg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            path of output folder</span>
<span class="sd">        vgg : str</span>
<span class="sd">            Gradient from Project file</span>
<span class="sd">        project :</span>
<span class="sd">            Project name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgg</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vgg</span><span class="p">)</span> <span class="c1"># gradient from project file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;Files&#39;</span><span class="p">,</span> <span class="n">project</span> <span class="o">+</span> <span class="s1">&#39;compare_gsoft_agdas.csv&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_hist</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;Graphs&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>

<div class="viewcode-block" id="Compare_gsoft_agdas.add_gsoft"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Compare_gsoft_agdas.add_gsoft">[docs]</a>    <span class="k">def</span> <span class="nf">add_gsoft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drop</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">hef</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reduce corrections of gsoft results and add to gsoft list</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        drop : dict</span>
<span class="sd">            line of drop file in dictionary structure</span>
<span class="sd">        hef : float</span>
<span class="sd">            g in effective height</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Set&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Drp&#39;</span><span class="p">])</span>

        <span class="c1"># reduce corrections</span>
        <span class="n">ffa_gsoft</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Gravity&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Tide&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Load&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span>
            <span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Baro&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span>
            <span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Polar&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">[</span><span class="s1">&#39;Transfer&#39;</span><span class="p">])</span>
        <span class="c1"># compute g in effective height</span>
        <span class="n">ffa_gsoft_hef</span> <span class="o">=</span> <span class="n">ffa_gsoft</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">vgg</span> <span class="o">*</span> <span class="n">hef</span> <span class="o">/</span> <span class="mi">10</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ffa_gsoft_hef</span><span class="p">)</span></div>

<div class="viewcode-block" id="Compare_gsoft_agdas.add_agdas"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Compare_gsoft_agdas.add_agdas">[docs]</a>    <span class="k">def</span> <span class="nf">add_agdas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">EfH</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add g to agdas.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        EfH : float</span>
<span class="sd">            g in effective height</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EfH</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span></div>

<div class="viewcode-block" id="Compare_gsoft_agdas.print_file"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Compare_gsoft_agdas.print_file">[docs]</a>    <span class="k">def</span> <span class="nf">print_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">acc</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write file with differences between Agdas and g-soft</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        acc : list</span>
<span class="sd">            list of tuples, bool, true - accepted</span>
<span class="sd">        delimiter : str</span>
<span class="sd">            delimiter for writing output file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># compute absolute value of differences for accepted drops</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diff_abs</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">))</span> <span class="k">if</span> <span class="n">acc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diff_</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">))]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diff__</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">))</span> <span class="k">if</span> <span class="n">acc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

        <span class="c1"># create summary</span>
        <span class="n">summ</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;max_diff_acc [nm.s-2]</span><span class="si">{}{:.2f}</span><span class="se">\n</span><span class="s2">min_diff_acc [nm.s-2]</span><span class="si">{}{:.2f}</span><span class="se">\n</span><span class="s2">avg_diff_acc [nm.s-2]</span><span class="si">{}{:.2f}</span><span class="se">\n</span><span class="s2">std_diff_acc [nm.s-2]</span><span class="si">{}{:.2f}</span><span class="se">\n</span><span class="s2"></span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diff__</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diff__</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diff__</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diff__</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># create header</span>
        <span class="c1"># set ; drop ; acc ; gsoft ; agdas ; diff</span>
        <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;set</span><span class="si">{0}</span><span class="s1">drop</span><span class="si">{0}</span><span class="s1">acc</span><span class="si">{0}</span><span class="s1">gsoft [nm.s-2]</span><span class="si">{0}</span><span class="s1">agdas [nm.s-2]</span><span class="si">{0}</span><span class="s1">diff</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}{}{}{}{}{}{:.3f}{}{:.3f}{}{:.3f}</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="c1"># open a create file</span>
        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">summ</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">)):</span>
            <span class="n">line_</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">delimiter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">drp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">delimiter</span><span class="p">,</span> <span class="n">acc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">delimiter</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">gsoft</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">agdas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">diff_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line_</span><span class="p">)</span>

        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="Compare_gsoft_agdas.print_histogram"><a class="viewcode-back" href="../../Agdas.html#Agdas.classes.Compare_gsoft_agdas.print_histogram">[docs]</a>    <span class="k">def</span> <span class="nf">print_histogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph_lang</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot histogram of differences</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        graph_lang : list</span>
<span class="sd">            differences</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path_hist</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">+</span> <span class="s1">&#39;_histogram_compare_gsoft_pyagdas&#39;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                  <span class="n">x_label</span><span class="o">=</span><span class="n">graph_lang</span><span class="p">[</span><span class="s1">&#39;histogram_diff&#39;</span><span class="p">][</span><span class="s1">&#39;xlabel&#39;</span><span class="p">],</span> <span class="n">y_label</span><span class="o">=</span><span class="n">graph_lang</span><span class="p">[</span><span class="s1">&#39;histogram_diff&#39;</span><span class="p">][</span><span class="s1">&#39;ylabel&#39;</span><span class="p">],</span>
                  <span class="n">title</span><span class="o">=</span><span class="n">graph_lang</span><span class="p">[</span><span class="s1">&#39;histogram_diff&#39;</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                  <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diff__</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># g.saveSourceData()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Jakub Simek.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>